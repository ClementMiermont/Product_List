<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="style.css">
	
	<title> Liste produits</title>
</head>

<body>

	<main id="app">

		<h1>
		  Liste des produits
		</h1>

		<table>
			<thead>
				<tr>
					<th>Nom produit</th>
					<th>Prix produit</th>
					<th>Quantité produit</th>
					<th>Catégorie produit</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<!-- Le v-for fait une boucle sur le tableau products et affiche les produits, on passe l'index pour pouvoir
				 ensuite récupérer, sauvegarder le produit en cours de modification et enregistrer les modifications -->
				<tr v-for="(product, index) in products" :key="index">
					<td>{{product.name}}</td>
					<td>{{product.price}}</td>
					<td>{{product.quantity}}</td>
					<td>{{product.category}}</td>
					<td>
						<button type="button" class="btn btn-primary actions" @click="editProduct(index)">Modifier</button>
						<button type="button" class="btn btn-danger actions" @click="deleteProduct(index)">
							<i class="fas fa-trash"></i> Supprimer
						</button>
					</td>
				</tr>
			</tbody>
		</table>

		<!-- MODAL pour modifier le produit  -->
		<div v-if="isModalVisible" id="editModal" class="modal">
			<div class="modal-content">
				<span class="close" @click="closeModal">X</span>
				<h2>Modifier le produit :</h2>

				<form @submit.prevent="updateProduct">
					<label for="editName">Nom produit:</label><br>
					<input type="text" id="editName" v-model="newProduct.name"><br>

					<label for="editPrice">Prix produit:</label><br>
					<input type="number" id="editPrice" v-model="newProduct.price"><br>

					<label for="editQuantity">Quantité produit:</label><br>
					<input type="number" id="editQuantity" v-model="newProduct.quantity"><br>

					<label for="editCategory">Catégorie produit:</label><br>
					<select id="editCategory" v-model="newProduct.category">
						<option value="category1">Catégorie 1</option>
						<option value="category2">Catégorie 2</option>
						<option value="category3">Catégorie 3</option>
					</select><br>

					<br><br>
					<input type="submit" value="Enregistrer" class="btn btn-success">
				</form>
			</div>
		</div>
		<!-- MODAL  -->

		<section class="add-more">
			<p>Ajouter un produit</p>
			<form @submit.prevent="addProducts">

				<label for="name">Nom produit:</label><br>
				<input type="text" id="name" v-model="newProduct.name"><br>

				<label for="price">Prix produit:</label><br>
				<input type="number" id="price" v-model="newProduct.price"><br>

				<label for="quantity">Quantité produit:</label><br>
				<input type="number" id="quantity" v-model="newProduct.quantity"><br>

				<label for="category">Catégorie produit:</label><br>
				<select id="category" v-model="newProduct.category" >
					<option value="category1">Catégorie 1</option>
					<option value="category2">Catégorie 2</option>
					<option value="category3">Catégorie 3</option>
				</select><br>

				<br><br>
				<input type="submit" value="Ajouter" class="btn btn-success">
			</form>
		</section>

	</main>
	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<script src="app.js"></script>

</body>

</html>
